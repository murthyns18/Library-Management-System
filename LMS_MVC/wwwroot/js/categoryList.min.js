function actionFormatter(n,t,i){return`
        <div class="text-nowrap">
            <button class="btn btn-sm btn-warning me-1 btn-edit" data-id="${i.categoryID}">
                <i class="bi bi-pencil-square"></i>
            </button>
            <button class="btn btn-sm btn-danger btn-delete"
                    data-id="${i.categoryID}"
                    data-name="${i.categoryName}">
                <i class="bi bi-trash"></i>     
            </button>
        </div>`}function statusFormatter(n){return isExport?n?"Active":"Inactive":n?"<span class='badge bg-success'>Active<\/span>":"<span class='badge bg-danger'>Inactive<\/span>"}function reloadCategoryGrid(){$("#categoryGrid").jqGrid("setGridParam",{datatype:"json",page:1}).trigger("reloadGrid")}function openAddCategoryModal(){$("#categoryForm")[0].reset();$("#CategoryID").val(0);$("#statusContainer").addClass("d-none");$("#categoryModalTitle").text("Add Category");$("#categoryModal").modal("show")}function openEditCategoryModal(n){$.get("/Category/EditCategory",{categoryID:n}).done(function(n){$("#CategoryID").val(n.categoryID);$("#CategoryName").val(n.categoryName);$('input[name="IsActive"][value="'+n.isActive+'"]').prop("checked",!0);$("#statusContainer").removeClass("d-none");$("#categoryModalTitle").text("Edit Category");$("#categoryModal").modal("show")}).fail(function(){App.alert("Failed to load category details.")})}async function deleteCategory(n,t){const i=await confirmAsync(`Are you sure you want to delete the category "${t}"?`);if(i)try{const i=await $.ajax({url:"/Category/DeleteCategory",type:"POST",data:{categoryID:n,forceDelete:!1,__RequestVerificationToken:$('input[name="__RequestVerificationToken"]').val()}});if(!i.success&&i.hasBooks){const r=await confirmAsync(`The category "${t}" has books. Do you want to delete the category along with its books?`);if(!r)return;const i=await $.ajax({url:"/Category/DeleteCategory",type:"POST",data:{categoryID:n,forceDelete:!0,__RequestVerificationToken:$('input[name="__RequestVerificationToken"]').val()}});i.success&&$("#categoryGrid").jqGrid("delRowData",n);App.alert(i.message)}else i.success?($("#categoryGrid").jqGrid("delRowData",n),App.alert(i.message)):App.alert(i.message)}catch{App.alert("Delete failed")}}$(document).on("click",".btn-edit",function(){openEditCategoryModal($(this).data("id"))});$(document).on("click",".btn-delete",function(){deleteCategory($(this).data("id"),$(this).data("name"))});$(function(){const n=[{label:"Action",name:"action",width:30,align:"center",sortable:!1,search:!1,formatter:actionFormatter,exportcol:!1},{name:"categoryID",key:!0,hidden:!0},{label:"Category Name",name:"categoryName",width:50},{label:"Status",name:"isActive",width:30,sortable:!1,align:"center",formatter:statusFormatter,stype:"select",searchoptions:{value:":All;true:Active;false:Inactive",sopt:["eq"]}}];App.CreateJQGrid("#categoryGrid",apiURL+"Category/CategoryList","json",[],n,TOKEN,!0,!1,"55vh")});submitModalForm({formSelector:"#categoryForm",modalSelector:"#categoryModal",onSuccess:function(){reloadCategoryGrid()}});
//# sourceMappingURL=categoryList.min.js.map